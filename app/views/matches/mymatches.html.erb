<div class="container">
<div id="main_content">
  <div class="tab-header">
  <li class="selected" id="booked" onclick="change_tab(this.id);">Booked matches</li>
  <li class="notselected" id="pending" onclick="change_tab(this.id);">Pending matches</li>
  <li class="notselected" id="created" onclick="change_tab(this.id);">Created matches</li>
  </div>

<div class="hidden_desc" id="booked_desc">
   <% if @participations == nil %>
      <p>No requested participations</p>
    <% else %>
        <% @participations.each do |participation| %>
          <%if participation.match.full%>
            <div class="card-match">
              <%=link_to match_path(participation.match), class: "card-trip" do %>
                  <%= cl_image_tag participation.match.user.photo.key, class: "avatar-bordered"%>
                  <div>
                  <p>📅 <%= participation.match.date.strftime("%d.%m.%y") %><p>
                  <p>🕒 <%= participation.match.start_time.time.to_s(:time) %> - <%= participation.match.end_time.time.to_s(:time)%><p>
                  <p>📍 <%= participation.match.venue.address %><p>
                  <p>Status: <%= participation.status %><p>
                  </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
    <% end %>
</div>

<div class='hidden_desc' id="pending_desc">
    <% if @participations == nil %>
      <p>No requested participations</p>
    <% else %>
      <% @participations.each do |participation| %>
          <% if participation.status == "pending" || !participation.match.full? && participation.status == "accepted"%>
            <div class="card-match">
              <%=link_to match_path(participation.match), class: "card-trip" do %>
                <%= cl_image_tag participation.match.user.photo.key, class: "avatar-bordered"%>
                <div>
                <p>📅 <%= participation.match.date.strftime("%d.%m.%y") %><p>
                <p>🕒 <%= participation.match.start_time.time.to_s(:time) %> - <%= participation.match.end_time.time.to_s(:time)%><p>
                <p>📍 <%= participation.match.venue.address %><p>
                <p>Status: <%= participation.status %><p>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
    <% end %>
</div>

<div class='hidden_desc' id="created_desc">
    <% if @matches == nil %>
      <p>No created matches</p>
    <% else %>
      <% @matches.each do |match| %>
        <div class="card-match">
          <%=link_to match_path(match)  do %>
            <%= cl_image_tag match.user.photo.key, class: "avatar-bordered"%>
            <div>
            <p>📅 <%= match.date.strftime("%d.%m.%y") %><p>
            <p>🕒 <%= match.start_time.time.to_s(:time) %> - <%= match.end_time.time.to_s(:time)%><p>
            <p>📍 <%= match.venue.address %><p>
            <% if match.participations == nil %>
              <p>Participants: No requested participations yet</p>
            <% else %>
              <p>requested participations:</p>
              <% match.participations.each do |participation|%>
                <% if participation.user != match.user %>
                  <% if participation.status == "pending" %>
                    <p><%= participation.user.user_name %> is waiting for your answer!</p>
                    <div class="btn btn-primary"><%= link_to "Accept", participation_accept_path(participation), method: :patch %></div>
                    <div class="btn btn-primary"><%= link_to "Decline", participation_decline_path(participation), method: :patch %></div>
                  <% elsif participation.status == "accepted" %>
                    <p>You can looking forward to playing against <%= participation.user.user_name %>!</p>
                    <p><%= participation.user.user_name %> is playing in Team <%= participation.team %>
                  <% else %>
                    <p>You declined <%= participation.user.user_name %>!</p>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>
</div>

<div id="page_content">
   <% if @participations == nil %>
      <p>No requested participations</p>
    <% else %>
        <% @participations.each do |participation| %>
          <%if participation.match.full%>
            <div class="card-match">
              <%=link_to match_path(participation.match), class: "card-trip" do %>
                <%= cl_image_tag participation.match.user.photo.key, class: "avatar-bordered"%>
                  <div>
                  <p>📅 <%= participation.match.date.strftime("%d.%m.%y") %><p>
                  <p>🕒 <%= participation.match.start_time.time.to_s(:time) %> - <%= participation.match.end_time.time.to_s(:time)%><p>
                  <p>📍 <%= participation.match.venue.address %><p>
                  <p>Status: <%= participation.status %><p>
                  </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      <% end %>
</div>

</div>
</div>
